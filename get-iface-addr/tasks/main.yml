# (c) 2016 DataNexus Inc.  All Rights Reserved
---
- set_fact:
    lcl_addr: "{{((hostvars[inventory_hostname]['ansible_' + iface_name] | default({})).ipv4 | default({})).address | default('')}}"
- fail: msg="Interface '{{iface_name}}' not found"
  when: lcl_addr == ''
- name: Get IP address of {{iface_name}}
  set_fact:
    "{{as_fact | default('iface_addr')}}": "{{lcl_addr}}"
